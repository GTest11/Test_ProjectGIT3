#'''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''' 
#TestCase ID: 
#Description: 
#Author: 
#Date: 
#Version: 

#''''''''''''''''''''AUTOGENERATED CODE - DO NOT MODIFY'''''''''''''''''''' 
import clr,sys,os,time 
from System.Collections.Generic import List
clr.AddReference("MobileScriptingLibrary") 
import MobileScriptingLibrary 
dut = MobileScriptingLibrary.MobileDUT() 
logger = MobileScriptingLibrary.Logger() 
chkpt = MobileScriptingLibrary.CheckPoint() 
config = MobileScriptingLibrary.DeviceConfig() 

#''''''''''''''''''''''''''''''''IMPORTS''''''''''''''''''''''''''''''''''' 
#''''''''''''''''''''''''''''''END IMPORTS''''''''''''''''''''''''''''''''' 

#''''''''''''''''''''''''''''''FOR iOS DEVICE'''''''''''''''''''''''''''''' 
config.DeviceType = "iOS" 
#config.AppName = "com.google.ios.youtube" 
config.AppName = "com.bskyb.nowtv"  # nowTv app 
#config.AppName = "com.bskyb.skygo"  # Skygo app
#config.AppName="in.startv.hotstar"


#''''''''''''''''''''''''''''FOR ANDROID DEVICE'''''''''''''''''''''''''''' 
#config.DeviceType = "Android" 
#config.AppPackage = "com.bskyb.nowtv.beta"
#config.AppName = "com.bskyb.nowtv" #ios
#config.CreateNewServer = True
#config.AppActivity = "com.nowtv.view.activity.StartupActivity"
args = sys.argv 
scriptPath = os.path.realpath(__file__) 
dut.Configure(args[1],args[2],args[3],args[4],scriptPath) 
logger.Configure(args[1],args[2],args[3],args[4],scriptPath) 
       
try: 
    if(dut.InitApp(config)): 
        time.sleep(40)
        logger.Log("App launched.")
        time.sleep(10)
        dut.Tap(243,807)   ###IPAD First selection before video UI for NowTV
        time.sleep(10)
        #dut.Tap(265,721)
        #dut.TapElement(ElementType,"Element Id",index)
        reservationRequest = MobileScriptingLibrary.HighPrecisionValidationService.SlotReservationRequest() 
        reservationRequest.AlgorithmCount = 1 
        reservationResponse = dut.ReserveSlotForHPA(reservationRequest) 
        logger.Log("Response - " + reservationResponse.Data.Token)

        request = MobileScriptingLibrary.HighPrecisionValidationService.VideoAnalysisRequest()
        deviceInfo = MobileScriptingLibrary.HighPrecisionValidationService.DeviceInfo()
        algorithmList =List[MobileScriptingLibrary.HighPrecisionValidationService.Algorithm]()
        algorithm = MobileScriptingLibrary.HighPrecisionValidationService.Algorithm()
        algorithm.Name = "Histogram"
        algorithm.Params = "eyAgICAicmdiRGV0YWlsc0xpc3QiOiBbewogICAgICAgICJyIjogMTAwLAogICAgICAgICJnIjogMzEsCiAgICAgICAgImIiOiAxNDAsCiAgICAgICAgInBpeGVsQ291bnRUaHJlc2hvbGQiOiA4MAogICAgfSwgewogICAgICAgICJyIjogMjU1LAogICAgICAgICJnIjogMTE2LAogICAgICAgICJiIjogNSwKICAgICAgICAicGl4ZWxDb3VudFRocmVzaG9sZCI6IDgwCiAgICB9LCB7CiAgICAgICAgInIiOiA0MSwKICAgICAgICAiZyI6IDEzOSwKICAgICAgICAiYiI6IDI2LAogICAgICAgICJwaXhlbENvdW50VGhyZXNob2xkIjogODAKICAgIH0sIHsKICAgICAgICAiciI6IDAsCiAgICAgICAgImciOiAxMDEsCiAgICAgICAgImIiOiAyNTUsCiAgICAgICAgInBpeGVsQ291bnRUaHJlc2hvbGQiOiA4MAogICAgfV0sCiAgICAibWFza0RldGFpbHMiOiB7CiAgICAgICAgInhjb3JkIjogNjA4LAogICAgICAgICJ5Y29yZCI6IDMwMywKICAgICAgICAid2lkdGgiOiA2OCwKICAgICAgICAiaGVpZ2h0IjogNTIKICAgIH0KfQ=="
        algorithmList.Add(algorithm)
        ## For houghcircles details
        #algorithm.Name = "HoughCircles" 
        #algorithm.Params = "CuKAiwp7CiAgIm1hc2tEZXRhaWxzIjogewogICAgInhjb3JkIjogNDUyLAogICAgInljb3JkIjogMTgyLAogICAgIndpZHRoIjogNDksCiAgICAiaGVpZ2h0IjogMzYKICB9LAogICJjaXJjbGVUaHJlc2hvbGRzIjogewogICAgImNpcmNsZVBlcmNlbnRhZ2VMb3dMaW1pdCI6IDMwLAogICAgImNpcmNsZVBlcmNlbnRhZ2VVcExpbWl0IjogODUsCiAgICAiY2lyY2xlUmFkaXVzTG93TGltaXQiOiAzMCwKICAgICJjaXJjbGVSYWRpdXNVcExpbWl0IjogNDAsCiAgICAiY2lyY2xlQ2VudGVyWE9mZnNldCI6IDE1LAogICAgImNpcmNsZUNlbnRlcllPZmZzZXQiOiAxOC4wLAogICAgImNpcmNsZUNlbnRlcldpZHRoIjogMzAuMCwKICAgICJjaXJjbGVDZW50ZXJIZWlnaHQiOiAzMC4wCiAgfSwKICAibWlzY1RocmVzaG9sZHMiOiB7CiAgICAiY2FubnlUaHJlc2hvbGQxIjogMzUsCiAgICAiY2FubnlUaHJlc2hvbGQyIjogODAsCiAgICAiaG91Z2hEcCI6IDEuNCwKICAgICJob3VnaE1pbkRpc3QiOiA1MC4wLAogICAgImhvdWdoUGFyYW0xIjogODAuMCwKICAgICJob3VnaFBhcmFtMiI6IDM3LjAsCiAgICAiZGlzdFRyYW5zZm9ybUZpbHRlckRpc3QiOiAzCiAgfQp9"
        #algorithmList.Add(algorithm) 
        #*******************************
        #For Match Template
        #algorithm.Name = "MatchTemplate"
        #algorithm.Params = "ewoJIkltYWdlRGF0YSI6ICIvOWovNEFBUVNrWkpSZ0FCQWdBQUFRQUJBQUQvMndCREFBVURCQVFFQXdVRUJBUUZCUVVHQnd3SUJ3Y0hCdzhLQ3drTUVROFNFaEVQRVJBVEZod1hFeFFhRlJBUkdDRVlHaHdkSHg4ZkV4Y2lKQ0llSkJ3ZUh4Ny8yd0JEQVFVRkJRY0dCdzRJQ0E0ZUZCRVVIaDRlSGg0ZUhoNGVIaDRlSGg0ZUhoNGVIaDRlSGg0ZUhoNGVIaDRlSGg0ZUhoNGVIaDRlSGg0ZUhoNGVIaDRlSGg3L3dBQVJDQUExQURzREFTSUFBaEVCQXhFQi84UUFId0FBQVFVQkFRRUJBUUVBQUFBQUFBQUFBQUVDQXdRRkJnY0lDUW9MLzhRQXRSQUFBZ0VEQXdJRUF3VUZCQVFBQUFGOUFRSURBQVFSQlJJaE1VRUdFMUZoQnlKeEZES0JrYUVJSTBLeHdSVlMwZkFrTTJKeWdna0tGaGNZR1JvbEppY29LU28wTlRZM09EazZRMFJGUmtkSVNVcFRWRlZXVjFoWldtTmtaV1puYUdscWMzUjFkbmQ0ZVhxRGhJV0doNGlKaXBLVGxKV1dsNWlabXFLanBLV21wNmlwcXJLenRMVzJ0N2k1dXNMRHhNWEd4OGpKeXRMVDFOWFcxOWpaMnVIaTQrVGw1dWZvNmVyeDh2UDA5ZmIzK1BuNi84UUFId0VBQXdFQkFRRUJBUUVCQVFBQUFBQUFBQUVDQXdRRkJnY0lDUW9MLzhRQXRSRUFBZ0VDQkFRREJBY0ZCQVFBQVFKM0FBRUNBeEVFQlNFeEJoSkJVUWRoY1JNaU1vRUlGRUtSb2JIQkNTTXpVdkFWWW5MUkNoWWtOT0VsOFJjWUdSb21KeWdwS2pVMk56ZzVPa05FUlVaSFNFbEtVMVJWVmxkWVdWcGpaR1ZtWjJocGFuTjBkWFozZUhsNmdvT0VoWWFIaUltS2twT1VsWmFYbUptYW9xT2twYWFucUttcXNyTzB0YmEzdUxtNndzUEV4Y2JIeU1uSzB0UFUxZGJYMk5uYTR1UGs1ZWJuNk9ucTh2UDA5ZmIzK1BuNi85b0FEQU1CQUFJUkF4RUFQd0Q1Q2tSdGgrN25yd01WN0YremZwUGhuVmZFVnhZYS9hUTNyZVFmS2psQlFiaWVRRjZaR01WZitGL3cyOE1lSi9CcHVialVXKzN5WkRwRTMrcWJQQks5TWlzdld2aHo0cjhEYXJCcStrTDl0aXQ1UE5TUzJPMDhkMlU4RGdkcTlIRHdmTTNmWFplaDIyU2Qxb0w4ZWZoL0g0VDE5TDNUWUdUU2J6SkdWT0lUeUNvSS9BL1hGZlF2d1BiL0FJc2hZWUczL1JISjU0SjI4KzNhdUoxLzRnK0NmRnZ3dW1UVjc2RmI1b2ViWEdaRWxJeGpISHY2ZEs1RDRmZkcrMjhPZkRodkRWM3BMeVRRUlBGQklyOEhPUnlDQWNqUDZWdnpweGQ5L3dDdFRtblZYVTRYNFhlQjdueHY0NWgwYlpLSUJJSkx5UU45eEJ5MlNPTTVKQXp6aXZjUDJtL0N2Z1R3djhOTGF5c05PZ3M5VWFSUmJ0SEdOejRJTE0zcU1aSjY5NnFmc3VlTHZBWGh6dzlxMS9yV3AyR25hcFBjczdwSVFybEIwVmVTU092VHVUV1BxbmhYeHQ4ZXZHYjY1WlFpSHc4a2hqczdxYkFqVkFmbStVNTNISUk2WXE1emk1WHZaZnFheXArMGpvZk9GL2I3SHloSlEvUHpWY0JqL0QrdGZkTGZzNC9Ecnc3NEZ1NWZFRjdOTmVRMjd5L2JHbDhuREFaNEFQSFFENlY4ZDNjbHBhWGx4Ynd6SzhhVE9GT2UyNDE1T0lxdU1yeEVvVTdtdDRac2ZHV21PbHhwdHJmMmt4SHpmdW1Va2Y3V1J5SzlWMC80cTYzcE9sSC9BSVNMUUppbTNZdHlSNVlKUEdXR2VLcFJmR2pUSFpjYVZPcDlkd3dmY2UxWi9qSDRodjRsOE8zT202Wm9rc3F1b1Y1bVhjSThuMHh6WG9YY2szRjNSVm5DbnJIUThuMXE3YSsxbTh2RWpXTlpabW5JVVkyaHNuQVgxT0t6YlNUS1NrbGdmOXVtb0dXVmhKdVVINys0VkFoS2REaXNLaW1wYW5Oek0yZE91eDVaV1RncU4yYSt1ZmhYOGE5ZnZQQWtHaWVDL2gzZmFycWxuRUF6QjFqZ0hKR1N4eHp3VGoyTmZITnREdXR6S2t2MXI2Vi9acCtMMXY4QURuUTd4Tlc4Tlg4MEYwNFpMcUZjakF6MXprZ2M4SDBvaXVlbXBKWFp1bDdyVWVoWDhiK0VQMmd2SDk2WDhRYURmUGJzL21MYkxQSDVDZ0VFTHNCeVNQZml2TnRVK0ZYajZ5djViVzU4S1hUU3hrQmk4RzhuanJrTFgxZ3Y3V25nVitCcHVwNzhrYlFtZjVEbXVXMWI5cnZUbDFHWmJUd3JMTEFHK1I1R1JXUEhjRTU2MXoxWnpTU2tySExVcVJiMWRqNTkrSEhnelR0V3RGMVRVTHhmSkIzZVhuQmIvZTkvcFhVYTE0dzBUdzFaUFo2ZERIdTI0RWFLT1JnaitsZUpXZXNYOEVEMmtWMUlpdHdFVWhRSzZEd0RwY212YTR6M0RraUoxWjhjaGdPZ3JycHVEZkxmUkdudEpPVnBsbTU4SjZsYzZYYytJREdBQ0dtOGpiMUc3ZGo2MXpWdm8ycDNObzExRlpTK1R1eThxZ2RQWVY2WjhUL0VBczdRYVhiSGEweStYSnRPTnFqcVFLMWZCTVVEK0JBdU1ueW1KQjlzOWF6Y25KdHZZT1NOcm5ubmhUd1hxR3M2VzkvSHNUeXowYmpkNzEyZmhIeGhhMmNhYUhxOXNxL1o4SXBDOEU1OVBTdWYrSG5pTTZacjg5bE5JcVdza3hUQmtIQkh5NFZmd3JWK0xuaDhxSXRjc2hINWZNY2h4azViaklIcUszYzBvMjZkRFJTZHVXSnIrSy9DMmc2bHBzMnJXTng1RWdUSkFQeUg2cWNpdkY3eWRWdXBGVmpnTng4MVhHMW0vU0JvVnVXVkQxVlR3ZndyTWVZN2pnREh2V1VxcWFYTWM4OFB5dnVSOUFSV3JvT3JYbWtYWmx0SldRc01FQTRCeFJSWFBUVnVjM25zTjFLOW4xSFVoTmR1WFp3MGpEdG5CL3dyMDd3YnFqSjRPV0ZJZ0JzUEpiSjZVVVVRK0Q1ay9aUE1KbkpsTXY4QUZ2Zm4vZ2RYdFcxL1ZyeXkrd3ozYnRCR0F3WDNDMFVWMFRTK3JGdytFd1NPS2JzWDBvb3FaeFRZSC8vWiIsCgkiTWF0Y2hTY29yZSI6IDEwLAoJIm1hc2tEZXRhaWxzIjogewoJCSJ4Y29yZCI6IDI5MiwKCQkieWNvcmQiOiA2MDMsCgkJIndpZHRoIjogNzAsCgkJImhlaWdodCI6IDcwCgl9Cn0="
        #algorithmList.Add(algorithm) 
##########################################
        request.Duration = 200
        request.Token =reservationResponse.Data.Token# "token" #reservationResponse.Data.Token
        request.Algorithms = algorithmList
        request.DeviceInfo = deviceInfo
        
        Test1 = dut.validator.QuickCapture("Test2")
        response = dut.validator.StartHighPrecisionFrameAnalysis(request)
        time.sleep(20)
        dut.Tap(148,354)    #First video(188,159) #(265,721) Hotstar 243,807  ##nowtv (325,410)
        #dut.Tap(432,270) Test Nowtv
        Test1 = dut.validator.QuickCapture("Test3")
        time.sleep(10)
#        dut.Tap(523, 530)
#        time.sleep(10)
#        dut.Tap(497, 1210)
#        time.sleep(10)
#        dut.Tap(1625, 966)
#        time.sleep(1)
#        dut.Tap(1625, 966)
        time.sleep(200)
        logger.Log("Response - " + str(response.Data)) 
        logger.Log("Response - " + response.Data.Token)        
        statusRequest = MobileScriptingLibrary.HighPrecisionValidationService.VideoAnalysisStatusRequest()
        statusRequest.Token = response.Data.Token
        statusRespose = dut.validator.GetHighPrecisionFrameAnalysisResult(statusRequest)
        logger.Log("StatusRespose - " + str(statusRespose)) 
        #dut.CommitTestResult("PASSED")

finally: 
    dut.CloseApp()

#'''''''''''''''''''''''''END AUTOGENERATED CODE''''''''''''''''''''''''''' 
#''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
